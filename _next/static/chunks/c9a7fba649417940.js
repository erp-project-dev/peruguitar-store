(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,49593,e=>{"use strict";function t(e,t){return`/catalog/${e}/${t}`}function a(e){return({new:"Nuevo",like_new:"Como nuevo"})[e]??e}e.s(["getCatalogImagePath",()=>t,"translateProductStatus",()=>a])},40433,e=>{"use strict";let t=(0,e.i(75254).default)("pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);e.s(["Pin",()=>t],40433)},33855,e=>{"use strict";var t=e.i(43476),a=e.i(71645),l=e.i(32039);class r{static handle(e={}){let{Merchants:t,Catalog:a,Brands:r,Types:i}=l.default,n=e.sort??"latest",s=[...a.filter(e=>e.is_enabled&&e.is_pinned),...a.filter(e=>e.is_enabled&&!e.is_pinned).sort((e,t)=>this.sortItems(e,t,n)).filter(this.buildFilter(e))].map(e=>{let a=t.find(t=>t.id===e.merchant_id);if(!a)throw Error(`DATA ERROR: Merchant not found for product ${e.id} (merchant_id: ${e.merchant_id})`);let l=r.find(t=>t.id===e.brand);if(!l)throw Error(`DATA ERROR: Brand not found for product ${e.id} (brand: ${e.brand})`);let n=i.find(t=>t.id===e.type);if(!n)throw Error(`DATA ERROR: Type not found for product ${e.id} (type: ${e.type})`);return{id:e.id,category:e.category,name:e.name,type:n,brand:l,model:e.model,status:e.status,statusScore:e.status_score,description:e.description,specs:e.specs,pic_1:e.pic_1,pic_2:e.pic_2,pic_3:e.pic_3,pic_4:e.pic_4,pic_6:e.pic_6,card_pic:e.card_pic,currency:e.currency,price:e.price,publishDate:new Date(e.publish_date),publishType:e.publish_type,isPinned:e.is_pinned,isEnabled:e.is_enabled,merchant:{id:a.id,fullName:`${a.name} ${a.last_name}`,whatsapp:a.whatsapp,instagram:a.instagram}}});return{total:s.length,items:s}}static buildFilter(e){return t=>(!e.brand||t.brand===e.brand)&&(!e.type||t.type===e.type)&&(null===e.minPrice||void 0===e.minPrice||!(t.price<e.minPrice))&&(null===e.maxPrice||void 0===e.maxPrice||!(t.price>e.maxPrice))}static sortItems(e,t,a){let l=new Date(e.publish_date).getTime(),r=new Date(t.publish_date).getTime();return"latest"===a?r-l:"oldest"===a?l-r:"price_desc"===a?t.price-e.price:"price_asc"===a?e.price-t.price:0}}class i{static handle(e={}){let{Brands:t}=l.default,a=[...t].sort((e,t)=>e.name.localeCompare(t.name,"es",{sensitivity:"base"}));if(e?.onlyInCatalog){let{items:e}=r.handle(),t=new Set(e.map(e=>e.brand.id));a=a.filter(e=>t.has(e.id))}return a}}class n{static handle(e={}){let{Types:t}=l.default,a=[...t].sort((e,t)=>e.name.localeCompare(t.name,"es",{sensitivity:"base"}));if(e?.onlyInCatalog){let{items:e}=r.handle(),t=new Set(e.map(e=>e.type.id));a=a.filter(e=>t.has(e.id))}return a}}var s=e.i(22016),o=e.i(40433),d=e.i(49593);let c={standard:"bg-slate-600/90 text-white border-slate-700",high_end:"bg-amber-600/90 text-white border-amber-700",signature:"bg-indigo-600/90 text-white border-indigo-700",rare:"bg-rose-600/90 text-white border-rose-700",discontinued:"bg-gray-800/90 text-white border-gray-900",limited:"bg-emerald-600/90 text-white border-emerald-700",vintage:"bg-orange-700/90 text-white border-orange-800",handcrafted:"bg-teal-700/90 text-white border-teal-800",boutique:"bg-purple-700/90 text-white border-purple-800"};function u(e){let a=e.isPinned?"border-2 border-dashed border-purple-700 shadow-purple-200":"",l=c[e.type.id];return(0,t.jsxs)(s.default,{href:e.id,className:`relative rounded-xl overflow-hidden shadow-md hover:shadow-sm transition cursor-pointer group ${a}`,children:[e.isPinned&&(0,t.jsx)("div",{className:"absolute top-3 left-3 z-20 bg-purple-700/90 p-1.5 rounded-full shadow-lg",children:(0,t.jsx)(o.Pin,{className:"w-4 h-4 text-white"})}),(0,t.jsx)("div",{className:`absolute top-3 right-3 z-20 px-2.5 py-1 rounded-full text-xs tracking-wide border shadow-md ${l}`,children:e.type.name}),(0,t.jsx)("img",{src:(0,d.getCatalogImagePath)(e.merchant.id,e.pic_1),alt:e.name,className:"w-full h-auto 2xl:h-[450px] xl:h-[350px] md:h-[350px] sm:h-[350px] object-cover group-hover:scale-105 transition-transform duration-500"}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 w-full p-4 bg-linear-to-t from-black/70 via-black/40 to-transparent",children:(0,t.jsxs)("div",{className:"relative h-14",children:[(0,t.jsx)("h2",{className:"absolute bottom-0 left-0 right-24 text-white font-semibold text-lg leading-none line-clamp-2 drop-shadow-md",children:e.name}),(0,t.jsx)("p",{className:"absolute bottom-0 right-0 inline-flex items-end text-yellow-400 font-bold text-lg leading-none whitespace-nowrap drop-shadow-md tabular-nums",children:e.price.toLocaleString("es-PE",{minimumFractionDigits:0,currency:e.currency,style:"currency"})})]})})]})}let m=(0,e.i(75254).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var p=e.i(37727);function h({options:e,value:l,onChange:r,placeholder:i="Seleccionar",width:n="auto",mobileTitle:s}){let[o,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!1),h=(0,a.useRef)(null),b=e.find(e=>e.value===l);(0,a.useEffect)(()=>{let e=window.matchMedia("(min-width: 640px)"),t=()=>u(e.matches);return t(),e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]),(0,a.useEffect)(()=>{if(!o||c)return;let e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}},[o,c]),(0,a.useEffect)(()=>{if(!o||!c)return;let e=e=>{h.current?.contains(e.target)||d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[o,c]);let g=c&&"number"==typeof n?{width:n}:c&&"auto"===n?{width:"fit-content"}:void 0;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{ref:h,className:"relative w-full sm:w-auto",style:g,children:[(0,t.jsxs)("button",{type:"button",onClick:()=>d(!0),className:"flex w-full items-center justify-between text-sm text-gray-100",children:[(0,t.jsx)("span",{className:b?"":"text-gray-400",children:b?.label??i}),(0,t.jsx)(m,{className:"h-4 w-4 ml-1"})]}),o&&c&&(0,t.jsx)("div",{className:"absolute z-50 mt-1 w-full rounded-md bg-gray-800 border border-gray-700 shadow-lg",children:e.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{r(e.value),d(!1)},className:`w-full px-3 py-2 text-sm text-left hover:bg-gray-700 ${l===e.value?"bg-gray-700 text-white":"text-gray-100"}`,children:e.label},e.value))})]}),o&&!c&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 bg-gray-900",children:[(0,t.jsxs)("div",{className:"sticky top-0 flex items-center justify-between px-4 py-4 border-b border-gray-800 bg-gray-950",children:[(0,t.jsx)("span",{className:"text-base font-semibold text-white",children:s}),(0,t.jsx)("button",{onClick:()=>d(!1),children:(0,t.jsx)(p.X,{className:"h-5 w-5 text-gray-200"})})]}),(0,t.jsx)("div",{className:"overflow-y-auto overscroll-contain",children:e.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{r(e.value),d(!1)},className:`w-full px-5 py-4 text-left text-base border-b border-gray-800 ${l===e.value?"bg-gray-800 text-white":"text-gray-100"}`,children:e.label},e.value))})]})]})}function b({label:e,children:a}){return(0,t.jsxs)("span",{className:"flex items-center gap-2 rounded-md bg-gray-800 text-gray-100 border border-gray-700 px-3 py-3 text-sm w-full sm:w-auto",children:[(0,t.jsxs)("span",{className:"font-bold whitespace-nowrap",children:[e,":"]}),a]})}function g({brands:e,types:l,onChange:r,minPrice:i,maxPrice:n}){let[s,o]=(0,a.useState)("latest"),[d,c]=(0,a.useState)(null),[u,m]=(0,a.useState)(null),[p,g]=(0,a.useState)(null),x="latest"!==s||null!==d||null!==u||null!==p,f=e=>{r({sort:s,brand:d,type:u,minPrice:i,maxPrice:n,...e})};return(0,t.jsxs)("div",{className:"flex flex-wrap justify-center items-center gap-3 focus:outline-none focus:ring-1 focus:ring-gray-600",children:[(0,t.jsx)(b,{label:"Ordenar por",children:(0,t.jsx)(h,{options:[{label:"Más recientes",value:"latest"},{label:"Más antiguos",value:"oldest"},{label:"Mayor precio",value:"price_desc"},{label:"Menor precio",value:"price_asc"}],value:s,onChange:e=>{o(e),f({sort:e})},width:120,mobileTitle:"Ordenamiento"})}),(0,t.jsx)(b,{label:"Marcas",children:(0,t.jsx)(h,{options:e,value:d,onChange:e=>{let t=e||null;c(t),f({brand:t})},placeholder:"Cualquiera",width:120,mobileTitle:"Marcas"})}),(0,t.jsx)(b,{label:"Cualidad",children:(0,t.jsx)(h,{options:l,value:u,onChange:e=>{let t=e||null;m(t),f({type:t})},placeholder:"Cualquiera",width:140,mobileTitle:"Cualidad"})}),(0,t.jsx)(b,{label:"Rango en (S/)",children:(0,t.jsx)(h,{options:function(e,t){if(e>=t)return[];let a=[],l=e=>1e3*Math.ceil(e/1e3),r=e=>e.toLocaleString("es-PE",{style:"currency",currency:"PEN",minimumFractionDigits:0,maximumFractionDigits:0}),i=1e3*Math.floor(e/1e3),n=l(t),s=1e3*Math.ceil((n-i)/4/1e3),o=i;for(let e=0;e<4;e++){let t=3===e?n:o+s-1;if(t=l(t),o>n)break;t>n&&(t=n),a.push({label:`Entre ${r(o)} y ${r(t)}`,value:`${o}:${t}`}),o=t+1}return a}(i,n),value:p,onChange:e=>{let t=e||null,a=null,l=null;g(t),t&&([a,l]=t.split(":").map(Number)),f({minPrice:a,maxPrice:l})},placeholder:"Cualquiera",width:200,mobileTitle:"Rango de precio"})}),x&&(0,t.jsx)("button",{onClick:()=>{let e={sort:"latest",brand:null,type:null,rangePrice:null};o(e.sort),c(null),m(null),g(null),r(e)},className:"text-sm text-gray-600 underline hover:text-gray-700 cursor-pointer",children:"Borrar filtros"})]})}function x(){let[e,l]=(0,a.useState)({sort:"latest",brand:null,type:null,minPrice:null,maxPrice:null}),s=(0,a.useMemo)(()=>r.handle({sort:"latest",brand:null,type:null,minPrice:null,maxPrice:null}),[]),o=(0,a.useMemo)(()=>r.handle(e),[e]),d=(0,a.useMemo)(()=>i.handle({onlyInCatalog:!0}),[]),c=(0,a.useMemo)(()=>n.handle({onlyInCatalog:!0}),[]),m=s.items.map(e=>e.price),p=m.length?Math.min(...m):0,h=m.length?Math.max(...m):0;return(0,t.jsxs)("section",{className:"space-y-6",children:[(0,t.jsx)(g,{brands:d.map(e=>({label:e.name,value:e.id})),types:c.map(e=>({label:e.name,value:e.id})),minPrice:p,maxPrice:h,onChange:l}),(0,t.jsx)("div",{className:" grid gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 ",children:o.items.map(e=>(0,t.jsx)(u,{...e},e.id))})]})}e.s(["default",()=>x],33855)}]);