(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,50240,e=>{"use strict";function t(e,t){return`/catalog/${e}/${t}`}function l(e){return({new:"Nuevo",like_new:"Como nuevo"})[e]??e}e.s(["getCatalogImagePath",()=>t,"translateProductStatus",()=>l])},40433,e=>{"use strict";let t=(0,e.i(75254).default)("pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);e.s(["Pin",()=>t],40433)},89689,e=>{"use strict";var t=e.i(43476),l=e.i(71645),a=e.i(32039);class i{static handle(e={}){let t,{Merchants:l,Catalog:i,Brands:n,Types:r}=a.default,s=e.sort??"latest",o=this.buildFilter(e);if(e.ignorePinned){let e=i.filter(e=>e.is_enabled).filter(o);t="random"===s?this.shuffle(e):e.sort((e,t)=>this.sortItems(e,t,s))}else{let e=i.filter(e=>e.is_enabled&&e.is_pinned).filter(o),l=i.filter(e=>e.is_enabled&&!e.is_pinned).filter(o);t=[...e,..."random"===s?this.shuffle(l):l.sort((e,t)=>this.sortItems(e,t,s))]}let d=(e.limit&&e.limit>0?t.slice(0,e.limit):t).map(e=>{let t=l.find(t=>t.id===e.merchant_id);if(!t)throw Error(`DATA ERROR: Merchant not found for product ${e.id} (merchant_id: ${e.merchant_id})`);let a=n.find(t=>t.id===e.brand);if(!a)throw Error(`DATA ERROR: Brand not found for product ${e.id} (brand: ${e.brand})`);let i=r.find(t=>t.id===e.type);if(!i)throw Error(`DATA ERROR: Type not found for product ${e.id} (type: ${e.type})`);return{id:e.id,category:e.category,name:e.name,type:i,brand:a,model:e.model,status:e.status,statusScore:e.status_score,description:e.description,specs:e.specs,pic_1:e.pic_1,pic_2:e.pic_2,pic_3:e.pic_3,pic_4:e.pic_4,pic_6:e.pic_6,card_pic:e.card_pic,currency:e.currency,price:e.price,publishDate:new Date(e.publish_date),publishType:e.publish_type,isPinned:e.is_pinned,isEnabled:e.is_enabled,merchant:{id:t.id,fullName:`${t.name} ${t.last_name}`,whatsapp:t.whatsapp,instagram:t.instagram}}});return{total:d.length,items:d}}static buildFilter(e){return t=>!(e.notIn&&e.notIn.includes(t.id))&&(!e.brand||t.brand===e.brand)&&(!e.type||t.type===e.type)&&(null===e.minPrice||void 0===e.minPrice||!(t.price<e.minPrice))&&(null===e.maxPrice||void 0===e.maxPrice||!(t.price>e.maxPrice))}static sortItems(e,t,l){let a=new Date(e.publish_date).getTime(),i=new Date(t.publish_date).getTime();return"latest"===l?i-a:"oldest"===l?a-i:"price_desc"===l?t.price-e.price:"price_asc"===l?e.price-t.price:0}static shuffle(e){let t=[...e];for(let e=t.length-1;e>0;e--){let l=Math.floor(Math.random()*(e+1));[t[e],t[l]]=[t[l],t[e]]}return t}}class n{static handle(e={}){let{Brands:t}=a.default,l=[...t].sort((e,t)=>e.name.localeCompare(t.name,"es",{sensitivity:"base"}));if(e?.onlyInCatalog){let{items:e}=i.handle(),t=new Set(e.map(e=>e.brand.id));l=l.filter(e=>t.has(e.id))}return l}}class r{static handle(e={}){let{Types:t}=a.default,l=[...t].sort((e,t)=>e.name.localeCompare(t.name,"es",{sensitivity:"base"}));if(e?.onlyInCatalog){let{items:e}=i.handle(),t=new Set(e.map(e=>e.type.id));l=l.filter(e=>t.has(e.id))}return l}}var s=e.i(22016),o=e.i(40433),d=e.i(50240);let c={standard:"bg-slate-600 text-white",high_end:"bg-amber-600 text-white",signature:"bg-indigo-600 text-white",rare:"bg-rose-600 text-white",discontinued:"bg-gray-800 text-white",limited:"bg-emerald-600 text-white",vintage:"bg-orange-700 text-white",handcrafted:"bg-teal-700 text-white",boutique:"bg-purple-700 text-white"};function u({product:e,ignorePinned:l}){let a=e.isPinned&&!l,i=c[e.type.id],n=a?"text-purple-700":"text-neutral-900";return(0,t.jsxs)(s.default,{href:e.id,className:`p-2 md:p-4 group block cursor-pointer rounded-2xl bg-white/35 hover:bg-white transition-shadow duration-300 hover:shadow-lg ${a?"md:outline-2 md:outline-purple-600 md:outline-dashed":""}`,children:[(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-xl",children:[a&&(0,t.jsx)("div",{className:"absolute top-2 left-2 z-10 bg-purple-600 p-1.5 rounded-full",children:(0,t.jsx)(o.Pin,{className:"w-4 h-4 text-white"})}),(0,t.jsx)("img",{src:(0,d.getCatalogImagePath)(e.merchant.id,e.pic_1),alt:e.name,className:"w-full aspect-7/6 object-cover transition-transform duration-300 group-hover:scale-[1.1]"})]}),(0,t.jsxs)("div",{className:"space-y-1 py-4",children:[(0,t.jsx)("div",{className:"text-[11px] md:text-xs uppercase tracking-wide text-neutral-500",children:e.brand.name}),(0,t.jsx)("h2",{className:`text-base md:text-lg font-semibold leading-snug line-clamp-2 ${n}`,children:e.name}),(0,t.jsx)("div",{className:`inline-block text-[11px] md:text-xs px-2 py-1 rounded-md font-medium ${i}`,children:e.type.name}),(0,t.jsx)("div",{className:"pt-1 md:pt-2 text-xl md:text-2xl font-bold text-neutral-900 tabular-nums",children:e.price.toLocaleString("es-PE",{minimumFractionDigits:0,currency:e.currency,style:"currency"})})]})]})}let m=(0,e.i(75254).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var p=e.i(37727);function h({options:e,value:a,onChange:i,placeholder:n="Seleccionar",width:r="auto",mobileTitle:s}){let[o,d]=(0,l.useState)(!1),[c,u]=(0,l.useState)(!1),h=(0,l.useRef)(null),b=e.find(e=>e.value===a);(0,l.useEffect)(()=>{let e=window.matchMedia("(min-width: 640px)"),t=()=>u(e.matches);return t(),e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]),(0,l.useEffect)(()=>{if(!o||c)return;let e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}},[o,c]),(0,l.useEffect)(()=>{if(!o||!c)return;let e=e=>{h.current?.contains(e.target)||d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[o,c]);let x=c&&"number"==typeof r?{width:r}:c&&"auto"===r?{width:"fit-content"}:void 0;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{ref:h,className:"relative w-full sm:w-auto",style:x,children:[(0,t.jsxs)("button",{type:"button",onClick:()=>d(!0),className:"flex w-full items-center justify-between text-sm text-gray-100",children:[(0,t.jsx)("span",{className:b?"":"text-gray-400",children:b?.label??n}),(0,t.jsx)(m,{className:"h-4 w-4 ml-1"})]}),o&&c&&(0,t.jsx)("div",{className:"absolute z-50 mt-1 w-full rounded-md bg-gray-800 border border-gray-700 shadow-lg",children:e.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{i(e.value),d(!1)},className:`w-full px-3 py-2 text-sm text-left hover:bg-gray-700 ${a===e.value?"bg-gray-700 text-white":"text-gray-100"}`,children:e.label},e.value))})]}),o&&!c&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 bg-gray-900",children:[(0,t.jsxs)("div",{className:"sticky top-0 flex items-center justify-between px-4 py-4 border-b border-gray-800 bg-gray-950",children:[(0,t.jsx)("span",{className:"text-base font-semibold text-white",children:s}),(0,t.jsx)("button",{onClick:()=>d(!1),children:(0,t.jsx)(p.X,{className:"h-5 w-5 text-gray-200"})})]}),(0,t.jsx)("div",{className:"overflow-y-auto overscroll-contain",children:e.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{i(e.value),d(!1)},className:`w-full px-5 py-4 text-left text-base border-b border-gray-800 ${a===e.value?"bg-gray-800 text-white":"text-gray-100"}`,children:e.label},e.value))})]})]})}function b({label:e,children:l}){return(0,t.jsxs)("span",{className:"flex items-center gap-2 rounded-md bg-gray-800 text-gray-100 border border-gray-700 px-3 py-3 text-sm w-full sm:w-auto",children:[(0,t.jsxs)("span",{className:"font-bold whitespace-nowrap",children:[e,":"]}),l]})}function x({defaultSort:e="latest",brands:a,types:i,onChange:n,minPrice:r,maxPrice:s}){let[o,d]=(0,l.useState)(e),[c,u]=(0,l.useState)(null),[m,p]=(0,l.useState)(null),[x,g]=(0,l.useState)(null),f="latest"!==o||null!==c||null!==m||null!==x,y=e=>{n({sort:o,brand:c,type:m,minPrice:r,maxPrice:s,...e})};return(0,t.jsxs)("div",{className:"hidden md:flex flex-wrap justify-center items-center gap-3 focus:outline-none focus:ring-1 focus:ring-gray-600",children:[(0,t.jsx)(b,{label:"Ordenar por",children:(0,t.jsx)(h,{options:[{label:"Más recientes",value:"latest"},{label:"Más antiguos",value:"oldest"},{label:"Mayor precio",value:"price_desc"},{label:"Menor precio",value:"price_asc"}],value:o,onChange:e=>{d(e),y({sort:e})},width:120,mobileTitle:"Ordenamiento"})}),(0,t.jsx)(b,{label:"Marcas",children:(0,t.jsx)(h,{options:a,value:c,onChange:e=>{let t=e||null;u(t),y({brand:t})},placeholder:"Cualquiera",width:120,mobileTitle:"Marcas"})}),(0,t.jsx)(b,{label:"Cualidad",children:(0,t.jsx)(h,{options:i,value:m,onChange:e=>{let t=e||null;p(t),y({type:t})},placeholder:"Cualquiera",width:140,mobileTitle:"Cualidad"})}),(0,t.jsx)(b,{label:"Rango en (S/)",children:(0,t.jsx)(h,{options:function(e,t){if(e>=t)return[];let l=[],a=e=>1e3*Math.ceil(e/1e3),i=e=>e.toLocaleString("es-PE",{style:"currency",currency:"PEN",minimumFractionDigits:0,maximumFractionDigits:0}),n=1e3*Math.floor(e/1e3),r=a(t),s=1e3*Math.ceil((r-n)/4/1e3),o=n;for(let e=0;e<4;e++){let t=3===e?r:o+s-1;if(t=a(t),o>r)break;t>r&&(t=r),l.push({label:`Entre ${i(o)} y ${i(t)}`,value:`${o}:${t}`}),o=t+1}return l}(r,s),value:x,onChange:e=>{let t=e||null,l=null,a=null;g(t),t&&([l,a]=t.split(":").map(Number)),y({minPrice:l,maxPrice:a})},placeholder:"Cualquiera",width:200,mobileTitle:"Rango de precio"})}),f&&(0,t.jsx)("button",{onClick:()=>{let e={sort:"latest",brand:null,type:null,rangePrice:null};d(e.sort),u(null),p(null),g(null),n(e)},className:"text-sm text-gray-600 underline hover:text-gray-700 cursor-pointer",children:"Borrar filtros"})]})}function g({sort:e="latest",notIn:a,limit:s}){let[o,d]=(0,l.useState)({sort:e,brand:null,type:null,minPrice:null,maxPrice:null,notIn:a,limit:s}),c=(0,l.useMemo)(()=>i.handle(o),[o]),m=(0,l.useMemo)(()=>n.handle({onlyInCatalog:!0}),[]),p=(0,l.useMemo)(()=>r.handle({onlyInCatalog:!0}),[]),h=c.items.map(e=>e.price),b=h.length?Math.min(...h):0,g=h.length?Math.max(...h):0;return(0,t.jsxs)("section",{className:"space-y-6",children:[(0,t.jsx)(x,{defaultSort:e,brands:m.map(e=>({label:e.name,value:e.id})),types:p.map(e=>({label:e.name,value:e.id})),minPrice:b,maxPrice:g,onChange:e=>d(t=>({...t,...e,notIn:a,limit:s}))}),(0,t.jsx)("div",{className:"grid gap-2 md:gap-8 grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6",children:c.items.map(e=>(0,t.jsx)(u,{product:e,ignorePinned:!1},e.id))})]})}e.s(["default",()=>g],89689)}]);